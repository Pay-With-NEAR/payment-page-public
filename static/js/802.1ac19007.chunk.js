"use strict";(self.webpackChunknearpay_donate=self.webpackChunknearpay_donate||[]).push([[802],{5090:function(e,n,r){r.r(n),r.d(n,{default:function(){return G}});var a=r(9824),t=r.n(a),s=r(4165),i=r(5861),c=function(){var e,n=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(n=!0),n},l=r(7891),o=function(e,n,r){switch(!0){case"tron"===e&&"TRX"===n:return"c195";case"tron"===e&&"USDT"===n:case"tron"===e&&"USDC"===n:return"c195_t".concat(r);case"near"===e:return"c397";default:return null}},d=function(){var e=function(e){return null!==o(e.blockchain,e.token,e.contract)&&c()};return{isAvailable:e,pay:function(){var n=(0,i.Z)((0,s.Z)().mark((function n(r){var a;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!1!==e(r)){n.next=3;break}return(0,l.A)("Trust Wallet is not support for current platform or currency"),n.abrupt("return");case 3:if(null!==(a=o(r.blockchain,r.token,r.contract))){n.next=7;break}return(0,l.A)("Trust Wallet is not support for current platform or currency"),n.abrupt("return");case 7:"https://link.trustwallet.com/send",window.location.href="".concat("https://link.trustwallet.com/send","?asset=").concat(a,"&address=").concat(r.address,"&amount=").concat(r.displayAmount);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},u=r(8767),p=r(4443),m=r(184),h=t()("pay-with-near-agreement"),v=function(e){var n=e.className;return(0,m.jsxs)("div",{className:h.mix(n),children:["By continuing, you agree to this"," ",(0,m.jsx)("a",{href:"https://linkee.ws/privacy-policy",target:"_blank",rel:"noopener noreferrer",children:"privacy policy"})," ","and"," ",(0,m.jsx)("a",{href:"https://linkee.ws/terms-and-conditions",target:"_blank",rel:"noopener noreferrer",children:"terms of service"})]})},x=r(885),f=r(1694),y=r.n(f),b=r(2791),j=r(2057),g=r(8683),k=r(4925),w=["disabled","children","loading","className","withArrow","loadingText","icon"];function N(e){var n=e.disabled,r=e.loading;return n?"ProceedButton--disabled":r?"ProceedButton--loading":"ProceedButton--active"}var _=(0,b.forwardRef)((function(e,n){var r=e.disabled,a=void 0!==r&&r,t=e.children,s=e.loading,i=void 0!==s&&s,c=e.className,l=(e.withArrow,e.loadingText),o=e.icon,d=(0,k.Z)(e,w),u=N({disabled:a,loading:i});return(0,m.jsxs)("button",(0,g.Z)((0,g.Z)({ref:n,className:y()("ProceedButton",u,c),disabled:a},d),{},{children:[i&&l?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{}),(0,m.jsx)("span",{children:l}),(0,m.jsx)("span",{})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("span",{}),(0,m.jsx)("span",{children:t}),(0,m.jsx)("span",{})]}),o&&(0,m.jsx)("div",{className:"ProceedButton__icon",children:o})]}))})),C=["label","slotAfterInput","slotRight","slotAfterLabel","children","error","size","textSize","className","placeholder"];function S(e){var n=e.label,r=e.slotAfterInput,a=e.slotRight,t=e.slotAfterLabel,s=e.children,i=e.error,c=(e.size,e.textSize,e.className),l=(e.placeholder,(0,k.Z)(e,C));if(r&&a)throw Error("Only one of after input slots can be used");return(0,m.jsxs)("label",(0,g.Z)((0,g.Z)({className:y()("Input",i?"Input--hasError":"",c)},l),{},{children:[(0,m.jsxs)("div",{className:"flex",children:[(0,m.jsxs)("div",{className:"flex-grow",children:[(0,m.jsxs)("div",{className:"Input__header",children:[(0,m.jsx)("div",{className:"Input__label",children:n}),t]}),(0,m.jsxs)("div",{className:"Input__wrapper",children:["function"===typeof s?s({inputClass:"Input__input"}):s,r?(0,m.jsx)("div",{className:"Input__after",children:r}):null]})]}),a?(0,m.jsx)("div",{className:"Input__afterCentered",children:a}):null]}),i?(0,m.jsx)("div",{className:"Input__error",children:i}):null]}))}var Z=r(948),A=["icon","className","transform","size","children"];function I(e){e.icon;var n=e.className,r=e.transform,a=e.size,t=e.children,s=(0,k.Z)(e,A),i=function(e){if(!e)return"";for(var n=[],r=0,a=Object.entries(e);r<a.length;r++){var t=(0,x.Z)(a[r],2),s=t[0],i=t[1];n.push("".concat(s,"(").concat(i,")"))}return n.join(",")}(r||{});return(0,m.jsx)("i",(0,g.Z)((0,g.Z)({className:y()("pay-with-near-icon",n),style:{transform:i,width:a,height:a}},s),{},{children:t}))}var z=["currency","options","className","disabled","onCurrencySelectClick"];function T(e){var n=e.currency,r=e.options,a=e.className,t=e.disabled,s=e.onCurrencySelectClick,i=(0,k.Z)(e,z),l=(0,b.useState)(!1),o=(0,x.Z)(l,2),d=o[0],u=o[1],h=(0,b.useCallback)((function(){u((function(e){return!e}))}),[]),v=(0,b.useCallback)((function(e){h(),s(e)}),[h,s]);return(0,m.jsx)("div",(0,g.Z)((0,g.Z)({className:y()("CurrencySelect",t?"CurrencySelect--disabled":"",a)},i),{},{children:c()?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(I,{className:"CurrencySelect__icon",children:(0,m.jsx)("img",{src:n.icon,alt:n.token})}),(0,m.jsx)("select",{className:"CurrencySelect__select",onChange:function(e){return s(e.target.value)},children:null===r||void 0===r?void 0:r.map((function(e){return(0,m.jsx)("option",{value:e.token,children:e.name},e.token)}))})]}):(0,m.jsx)(m.Fragment,{children:(0,m.jsxs)("div",{className:"CurrencySelect__container",children:[(0,m.jsxs)("button",{className:"CurrencySelect__button",onClick:h,children:[(0,m.jsx)(I,{className:"CurrencySelect__icon",children:(0,m.jsx)("img",{src:n.icon,alt:n.token})}),(0,m.jsx)("div",{className:"CurrencySelect__text",children:n.name}),(0,m.jsx)(I,{size:20,className:"CurrencySelect__arrow",children:(0,m.jsx)(p.UL,{})})]}),d&&(0,m.jsx)("ul",{className:"CurrencySelect__list",children:null===r||void 0===r?void 0:r.map((function(e){return(0,m.jsxs)("li",{className:"CurrencySelect__item",onClick:function(){return v(e.token)},children:[(0,m.jsx)(I,{className:"CurrencySelect__icon",children:(0,m.jsx)("img",{src:e.icon,alt:e.token})}),e.name]},e.icon)}))})]})})}))}var P=["onInput","value","label","onValueChange","onCurrencySelectClick","error","selectDisabled","inputDisabled","currency","currencies","isLoading"];function W(e){var n=e.onInput,r=e.value,a=e.label,t=e.onValueChange,s=e.onCurrencySelectClick,i=e.error,c=e.selectDisabled,l=(e.inputDisabled,e.currency),o=e.currencies,d=e.isLoading,u=void 0!==d&&d,p=(0,k.Z)(e,P);return(0,m.jsx)(S,(0,g.Z)((0,g.Z)({label:a,error:i,slotAfterInput:(0,m.jsx)(T,{currency:l,onCurrencySelectClick:c?function(){}:s,disabled:!!c,options:o})},p),{},{children:u?(0,m.jsx)("input",{disabled:!0,readOnly:!0}):(0,m.jsx)(Z.Z,{thousandSeparator:!1,onValueChange:t,allowLeadingZeros:!0,onInput:n,value:r,placeholder:"0.00",readOnly:!0})}))}var E=r(7892),L=r.n(E),D=(0,a.block)("pay-with-near-pay-timer"),q=function(e){var n=e.expiryAt,r=e.onExpired,a=(0,b.useState)(R(n)),t=(0,x.Z)(a,2),s=t[0],i=t[1];return(0,b.useEffect)((function(){R(n)<0&&r();var e=setTimeout((function(){i(R(n))}),1e3);return function(){return clearTimeout(e)}}),[s,n,r]),R(n)<0?null:(0,m.jsx)("div",{className:D(),children:B(s)})},R=function(e){var n=L()(e),r=L().utc();return n.diff(r)},B=function(e){var n=Math.floor(e/6e4),r=e%6e4,a=Math.floor(r/1e3);return"".concat(n,":").concat(a>9?a:"0".concat(a))},O=["className"];function F(e){var n=e.className,r=(0,k.Z)(e,O);return(0,m.jsx)("div",(0,g.Z)({className:y()("WidgetContainer",n)},r))}var V=r(5020),U=(0,a.block)("pay-with-near-pay-widget"),X=(0,a.block)("pay-with-near-pay-widget-description"),M=function(e){var n,r=(0,V.N)(),a=e.payment,t=e.onNearWallet,s=e.onExpired,i=e.hasTrustWallet,c=e.onTrustWallet,o=(0,b.useState)([]),d=(0,x.Z)(o,2),u=d[0],h=d[1],v=(0,b.useState)((function(){return a.addresses[0]})),f=(0,x.Z)(v,2),g=f[0],k=f[1];(0,b.useEffect)((function(){var e=a.addresses.filter((function(e){return!0!==a.hide_usn||"usn"!==e.token.toLowerCase()}));h(e),k(e[0])}),[a]);var w="$".concat(a.display_amount_usd);"eur"===a.local_currency&&(w="\u20ac".concat(a.display_amount_eur));var N=(0,b.useCallback)((function(e){var n=u.find((function(n){return n.token===e}));k(null!==n&&void 0!==n?n:u[0])}),[u]);return(0,m.jsxs)(F,{className:U(),children:[(0,m.jsx)("div",{className:U("title"),children:a.name}),(0,m.jsx)("div",{className:U("description"),children:a.description}),(0,m.jsxs)("div",{className:X(),children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:X("label"),children:"Payment ID:"}),(0,m.jsx)("div",{children:a.payment_id})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("div",{className:X("label"),children:"Address:"}),(0,m.jsx)("div",{className:X("address"),children:g.address})]})]}),(0,m.jsxs)("div",{className:U("flexbox"),children:[(0,m.jsx)("div",{className:U("amount"),children:w}),(0,m.jsx)(q,{expiryAt:a.expiry_at,onExpired:s})]}),(0,m.jsx)(W,{label:"Amount to Pay",value:g.displayAmount,currency:g,onValueChange:function(){},onCurrencySelectClick:N,selectDisabled:!1,currencies:u,className:"mb-4"}),(null===r||void 0===r?void 0:r.wallet)&&"near"===g.blockchain&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(_,{onClick:function(){return t(g)},children:(0,m.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:["Pay with ",null===r||void 0===r?void 0:r.wallet.metadata.name]})}),(0,m.jsx)(_,{onClick:function(){var e;return null===r||void 0===r||null===(e=r.wallet)||void 0===e?void 0:e.signOut()},children:"Logout"}),(0,m.jsxs)("div",{className:U("payment-address"),children:[(0,m.jsx)("span",{style:{flexShrink:0},children:"You signed in"}),(0,m.jsx)("span",{children:null===(n=r.selector.store.getState().accounts.find((function(e){return e.active})))||void 0===n?void 0:n.accountId})]})]}),!(null!==r&&void 0!==r&&r.wallet)&&"near"===g.blockchain&&(0,m.jsx)(_,{onClick:function(){return t(g)},children:"Login with Near Selector"}),i(g)&&(0,m.jsx)(_,{onClick:function(){return c(g)},children:"Pay with Trust Wallet"}),(0,m.jsx)("div",{className:U("or"),children:"or"}),(0,m.jsx)("div",{className:U("payment-qr-text"),children:"Tap on the qr code to copy the address"}),(0,m.jsx)("div",{className:U("qr-code-container"),onClick:function(){navigator.clipboard.writeText(g.address).then((function(){(0,l.A)("The address has been copied to the clipboard")}))},children:(0,m.jsx)(j.tv,{value:"".concat(g.address,"?amount=").concat(g.displayAmount)})}),(0,m.jsx)("div",{className:U("payment-method-text"),children:"Scan following\xa0QR code with your wallet or\xa0enter Account\xa0ID\xa0and amount manually."}),(0,m.jsxs)("a",{href:"https://nearpay.co",target:"_blank",rel:"noopener noreferrer",className:y()(U("link-nearpay")),children:[(0,m.jsx)("span",{className:U("link-nearpay_gray"),children:"Powered by"}),"  ",(0,m.jsx)(p.v5,{className:U("link-nearpay_icon"),width:"20",height:"15"}),"  ",(0,m.jsx)("span",{children:"NearPay"})]})]})},Q=r(1618),Y=r(7421),$=(0,a.block)("pay-with-near-payment-page");var G=function(){var e=(0,Y.V)(),n=e.payment,r=e.isExpired,a=e.handleExpired,t=(0,Q.O)(null!==n&&void 0!==n?n:null),s=d(),i=!!n||r,c=(null===n||void 0===n?void 0:n.return_url)||document.referrer||u.N.payWithNearUrl;return i?r?(0,m.jsxs)(p.RX,{className:$(),children:[(0,m.jsx)("span",{className:$("message"),children:"This payment link is expired"}),document.referrer&&(0,m.jsx)("a",{className:$("link"),href:c,children:"Back to shop"})]}):n?(0,m.jsxs)(p.RX,{children:[(0,m.jsx)(M,{payment:n,hasTrustWallet:s.isAvailable,onTrustWallet:function(e){return s.pay(e)},onNearWallet:function(e){return t(e)},onExpired:a}),(0,m.jsx)(v,{})]}):null:(0,m.jsx)(p.RX,{children:(0,m.jsx)(p.zL,{children:(0,m.jsx)(p.aN,{})})})}}}]);
//# sourceMappingURL=802.1ac19007.chunk.js.map