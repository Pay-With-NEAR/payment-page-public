"use strict";(self.webpackChunknearpay_donate=self.webpackChunknearpay_donate||[]).push([[802],{5090:function(e,n,a){a.r(n),a.d(n,{default:function(){return $}});var r=a(9824),t=a.n(r),i=a(4165),s=a(5861),l=function(){var e,n=!1;return e=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(n=!0),n},c=a(7891),o=function(){var e=function(e){return"NEAR"===e.token&&l()};return{isAvailable:e,pay:function(){var n=(0,s.Z)((0,i.Z)().mark((function n(a){return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!1!==e(a)){n.next=3;break}return(0,c.A)("Trust Wallet is not support for current platform or currency"),n.abrupt("return");case 3:"c397","https://link.trustwallet.com/send",window.location.href="".concat("https://link.trustwallet.com/send","?asset=").concat("c397","&address=").concat(a.address,"&amount=").concat(a.displayAmount);case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}},d=a(8767),u=a(4443),p=a(184),m=t()("pay-with-near-agreement"),h=function(e){var n=e.className;return(0,p.jsxs)("div",{className:m.mix(n),children:["By continuing, you agree to this"," ",(0,p.jsx)("a",{href:"https://linkee.ws/privacy-policy",target:"_blank",rel:"noopener noreferrer",children:"privacy policy"})," ","and"," ",(0,p.jsx)("a",{href:"https://linkee.ws/terms-and-conditions",target:"_blank",rel:"noopener noreferrer",children:"terms of service"})]})},v=a(885),x=a(1694),f=a.n(x),y=a(2791),j=a(2057),b=a(8683),g=a(4925),k=["disabled","children","loading","className","withArrow","loadingText","icon"];function w(e){var n=e.disabled,a=e.loading;return n?"ProceedButton--disabled":a?"ProceedButton--loading":"ProceedButton--active"}var N=(0,y.forwardRef)((function(e,n){var a=e.disabled,r=void 0!==a&&a,t=e.children,i=e.loading,s=void 0!==i&&i,l=e.className,c=(e.withArrow,e.loadingText),o=e.icon,d=(0,g.Z)(e,k),u=w({disabled:r,loading:s});return(0,p.jsxs)("button",(0,b.Z)((0,b.Z)({ref:n,className:f()("ProceedButton",u,l),disabled:r},d),{},{children:[s&&c?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{}),(0,p.jsx)("span",{children:c}),(0,p.jsx)("span",{})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("span",{}),(0,p.jsx)("span",{children:t}),(0,p.jsx)("span",{})]}),o&&(0,p.jsx)("div",{className:"ProceedButton__icon",children:o})]}))})),_=["label","slotAfterInput","slotRight","slotAfterLabel","children","error","size","textSize","className","placeholder"];function C(e){var n=e.label,a=e.slotAfterInput,r=e.slotRight,t=e.slotAfterLabel,i=e.children,s=e.error,l=(e.size,e.textSize,e.className),c=(e.placeholder,(0,g.Z)(e,_));if(a&&r)throw Error("Only one of after input slots can be used");return(0,p.jsxs)("label",(0,b.Z)((0,b.Z)({className:f()("Input",s?"Input--hasError":"",l)},c),{},{children:[(0,p.jsxs)("div",{className:"flex",children:[(0,p.jsxs)("div",{className:"flex-grow",children:[(0,p.jsxs)("div",{className:"Input__header",children:[(0,p.jsx)("div",{className:"Input__label",children:n}),t]}),(0,p.jsxs)("div",{className:"Input__wrapper",children:["function"===typeof i?i({inputClass:"Input__input"}):i,a?(0,p.jsx)("div",{className:"Input__after",children:a}):null]})]}),r?(0,p.jsx)("div",{className:"Input__afterCentered",children:r}):null]}),s?(0,p.jsx)("div",{className:"Input__error",children:s}):null]}))}var S=a(948),Z=["icon","className","transform","size","children"];function A(e){e.icon;var n=e.className,a=e.transform,r=e.size,t=e.children,i=(0,g.Z)(e,Z),s=function(e){if(!e)return"";for(var n=[],a=0,r=Object.entries(e);a<r.length;a++){var t=(0,v.Z)(r[a],2),i=t[0],s=t[1];n.push("".concat(i,"(").concat(s,")"))}return n.join(",")}(a||{});return(0,p.jsx)("i",(0,b.Z)((0,b.Z)({className:f()("pay-with-near-icon",n),style:{transform:s,width:r,height:r}},i),{},{children:t}))}var z=["currency","options","className","disabled","onCurrencySelectClick"];function I(e){var n=e.currency,a=e.options,r=e.className,t=e.disabled,i=e.onCurrencySelectClick,s=(0,g.Z)(e,z),c=(0,y.useState)(!1),o=(0,v.Z)(c,2),d=o[0],m=o[1],h=(0,y.useCallback)((function(){m((function(e){return!e}))}),[]),x=(0,y.useCallback)((function(e){h(),i(e)}),[h,i]);return(0,p.jsx)("div",(0,b.Z)((0,b.Z)({className:f()("CurrencySelect",t?"CurrencySelect--disabled":"",r)},s),{},{children:l()?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(A,{className:"CurrencySelect__icon",children:(0,p.jsx)("img",{src:n.icon,alt:n.token})}),(0,p.jsx)("select",{className:"CurrencySelect__select",onChange:function(e){return i(e.target.value)},children:null===a||void 0===a?void 0:a.map((function(e){return(0,p.jsx)("option",{value:e.token,children:e.token},e.token)}))})]}):(0,p.jsx)(p.Fragment,{children:(0,p.jsxs)("div",{className:"CurrencySelect__container",children:[(0,p.jsxs)("button",{className:"CurrencySelect__button",onClick:h,children:[(0,p.jsx)(A,{className:"CurrencySelect__icon",children:(0,p.jsx)("img",{src:n.icon,alt:n.token})}),(0,p.jsx)("div",{className:"CurrencySelect__text",children:n.token}),(0,p.jsx)(A,{size:20,className:"CurrencySelect__arrow",children:(0,p.jsx)(u.UL,{})})]}),d&&(0,p.jsx)("ul",{className:"CurrencySelect__list",children:null===a||void 0===a?void 0:a.map((function(e){return(0,p.jsxs)("li",{className:"CurrencySelect__item",onClick:function(){return x(e.token)},children:[(0,p.jsx)(A,{className:"CurrencySelect__icon",children:(0,p.jsx)("img",{src:e.icon,alt:e.token})}),e.token]},e.icon)}))})]})})}))}var T=["onInput","value","label","onValueChange","onCurrencySelectClick","error","selectDisabled","inputDisabled","currency","currencies","isLoading"];function E(e){var n=e.onInput,a=e.value,r=e.label,t=e.onValueChange,i=e.onCurrencySelectClick,s=e.error,l=e.selectDisabled,c=(e.inputDisabled,e.currency),o=e.currencies,d=e.isLoading,u=void 0!==d&&d,m=(0,g.Z)(e,T);return(0,p.jsx)(C,(0,b.Z)((0,b.Z)({label:r,error:s,slotAfterInput:(0,p.jsx)(I,{currency:c,onCurrencySelectClick:l?function(){}:i,disabled:!!l,options:o})},m),{},{children:u?(0,p.jsx)("input",{disabled:!0,readOnly:!0}):(0,p.jsx)(S.Z,{thousandSeparator:!1,onValueChange:t,allowLeadingZeros:!0,onInput:n,value:a,placeholder:"0.00",readOnly:!0})}))}var P=a(7892),L=a.n(P),W=(0,r.block)("pay-with-near-pay-timer"),R=function(e){var n=e.expiryAt,a=e.onExpired,r=(0,y.useState)(q(n)),t=(0,v.Z)(r,2),i=t[0],s=t[1];return(0,y.useEffect)((function(){q(n)<0&&a();var e=setTimeout((function(){s(q(n))}),1e3);return function(){return clearTimeout(e)}}),[i,n,a]),q(n)<0?null:(0,p.jsx)("div",{className:W(),children:B(i)})},q=function(e){var n=L()(e),a=L().utc();return n.diff(a)},B=function(e){var n=Math.floor(e/6e4),a=e%6e4,r=Math.floor(a/1e3);return"".concat(n,":").concat(r>9?r:"0".concat(r))},D=["className"];function O(e){var n=e.className,a=(0,g.Z)(e,D);return(0,p.jsx)("div",(0,b.Z)({className:f()("WidgetContainer",n)},a))}var F=a(5020),V=(0,r.block)("pay-with-near-pay-widget"),X=(0,r.block)("pay-with-near-pay-widget-description"),M=function(e){var n,a=(0,F.N)(),r=e.payment,t=e.onNearWallet,i=e.onExpired,s=e.hasTrustWallet,l=e.onTrustWallet,o=(0,y.useState)([]),d=(0,v.Z)(o,2),m=d[0],h=d[1],x=(0,y.useState)((function(){return r.addresses[0]})),b=(0,v.Z)(x,2),g=b[0],k=b[1];(0,y.useEffect)((function(){var e=r.addresses.filter((function(e){return!1===r.hide_usn||"usn"!==e.token.toLowerCase()}));h(e),k(e[0])}),[r]);var w="$".concat(r.display_amount_usd);"eur"===r.local_currency&&(w="\u20ac".concat(r.display_amount_eur));var _=(0,y.useCallback)((function(e){var n=m.find((function(n){return n.token===e}));k(null!==n&&void 0!==n?n:m[0])}),[m]);return(0,p.jsxs)(O,{className:V(),children:[(0,p.jsx)("div",{className:V("title"),children:r.name}),(0,p.jsx)("div",{className:V("description"),children:r.description}),(0,p.jsxs)("div",{className:X(),children:[(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:X("label"),children:"Payment: "}),(0,p.jsx)("div",{children:r.payment_id})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{className:X("label"),children:"Recipient: "}),(0,p.jsx)("div",{className:X("address"),children:g.address})]})]}),(0,p.jsxs)("div",{className:V("flexbox"),children:[(0,p.jsx)("div",{className:V("amount"),children:w}),(0,p.jsx)(R,{expiryAt:r.expiry_at,onExpired:i})]}),(0,p.jsx)(E,{label:"Amount to Pay",value:g.displayAmount,currency:g,onValueChange:function(){},onCurrencySelectClick:_,selectDisabled:!1,currencies:m,className:"mb-4"}),(null===a||void 0===a?void 0:a.wallet)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(N,{onClick:function(){return t(g)},children:(0,p.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},children:["Pay with ",null===a||void 0===a?void 0:a.wallet.metadata.name]})}),(0,p.jsx)(N,{onClick:function(){var e;return null===a||void 0===a||null===(e=a.wallet)||void 0===e?void 0:e.signOut()},children:"Logout"}),(0,p.jsxs)("div",{className:V("payment-address"),children:[(0,p.jsx)("span",{style:{flexShrink:0},children:"You signed in"}),(0,p.jsx)("span",{children:null===(n=a.selector.store.getState().accounts.find((function(e){return e.active})))||void 0===n?void 0:n.accountId})]})]}),!(null!==a&&void 0!==a&&a.wallet)&&(0,p.jsx)(N,{onClick:function(){return t(g)},children:"Login with Near Selector"}),s(g)&&(0,p.jsx)(N,{onClick:function(){return l(g)},children:"Pay with Trust Wallet"}),(0,p.jsx)("div",{className:V("or"),children:"or"}),(0,p.jsx)("div",{className:V("payment-qr-text"),children:"Tap on the qr code to copy the address"}),(0,p.jsx)("div",{className:V("qr-code-container"),onClick:function(){navigator.clipboard.writeText(g.address).then((function(){(0,c.A)("The address has been copied to the clipboard")}))},children:(0,p.jsx)(j.tv,{value:"".concat(g.address,"?amount=").concat(g.displayAmount)})}),(0,p.jsx)("div",{className:V("payment-method-text"),children:"Scan following\xa0QR code with your wallet or\xa0enter Account\xa0ID\xa0and amount manually."}),(0,p.jsxs)("a",{href:"http://nearpay.co",target:"_blank",rel:"noopener noreferrer",className:f()(V("link-nearpay")),children:[(0,p.jsx)("span",{className:V("link-nearpay_gray"),children:"Powered by"}),"  ",(0,p.jsx)(u.v5,{className:V("link-nearpay_icon"),width:"20",height:"15"}),"  ",(0,p.jsx)("span",{children:"NearPay"})]})]})},U=a(1618),Q=a(7421),Y=(0,r.block)("pay-with-near-payment-page");var $=function(){var e=(0,Q.V)(),n=e.payment,a=e.isExpired,r=e.handleExpired,t=(0,U.O)(null!==n&&void 0!==n?n:null),i=o(),s=!!n||a,l=(null===n||void 0===n?void 0:n.return_url)||document.referrer||d.N.payWithNearUrl;return s?a?(0,p.jsxs)(u.RX,{className:Y(),children:[(0,p.jsx)("span",{className:Y("message"),children:"This payment link is expired"}),document.referrer&&(0,p.jsx)("a",{className:Y("link"),href:l,children:"Back to shop"})]}):n?(0,p.jsxs)(u.RX,{children:[(0,p.jsx)(M,{payment:n,hasTrustWallet:i.isAvailable,onTrustWallet:function(e){return i.pay(e)},onNearWallet:function(e){return t(e)},onExpired:r}),(0,p.jsx)(h,{})]}):null:(0,p.jsx)(u.RX,{children:(0,p.jsx)(u.zL,{children:(0,p.jsx)(u.aN,{})})})}}}]);
//# sourceMappingURL=802.309c9643.chunk.js.map