{"version":3,"file":"static/js/59.5dd72b20.chunk.js","mappings":"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","sources":["components/agreement/agreement.tsx","components/proceed-button/proceed-button.tsx","ui/input/input.tsx","ui/icon/icon.tsx","components/currency-input/currency-select/currency-select.tsx","components/currency-input/currency-input.tsx","ui/widget-container/widget-container.tsx","components/expiry-timer/expiry-timer.tsx","components/pay-widget/pay-widget.tsx","pages/payment-page/model.ts","pages/payment-page/payment-page.tsx","pages/payment-page/index.ts"],"sourcesContent":["import block from \"bem-cn\";\nimport \"./agreement.scss\";\n\nconst b = block(\"pay-with-near-agreement\");\n\ntype Props = {\n  className?: string;\n};\n\nexport const Agreement: React.FC<Props> = (props) => {\n  const { className } = props;\n\n  return (\n    <div className={b.mix(className)}>\n      By continuing, you agree to this{\" \"}\n      <a\n        href=\"https://nearpay.co/privacy_policy\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        privacy policy\n      </a>{\" \"}\n      and{\" \"}\n      <a\n        href=\"https://nearpay.co/terms_of_use\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        terms of service\n      </a>\n    </div>\n  );\n};\n","import classNames from \"classnames\";\nimport React, {\n  AnchorHTMLAttributes,\n  ButtonHTMLAttributes,\n  forwardRef,\n} from \"react\";\nimport \"./proceed-button.scss\";\n\ninterface IProceedButtonComponentProps\n  extends ButtonHTMLAttributes<HTMLButtonElement> {\n  disabled?: boolean;\n  loading?: boolean;\n  loadingText?: string | React.ReactNode;\n  withArrow?: boolean;\n  icon?: React.ReactNode;\n}\ninterface IProceedLinkComponentProps\n  extends AnchorHTMLAttributes<HTMLAnchorElement> {\n  disabled?: boolean;\n  loading?: boolean;\n  loadingText?: string | React.ReactNode;\n  withArrow?: boolean;\n}\n\nfunction proceedAppearance({\n  disabled,\n  loading,\n}: {\n  disabled: boolean;\n  loading: boolean;\n}) {\n  const stateClassName = disabled\n    ? \"ProceedButton--disabled\"\n    : loading\n    ? \"ProceedButton--loading\"\n    : \"ProceedButton--active\";\n\n  return stateClassName;\n}\n\nexport const ProceedLink = forwardRef<\n  HTMLAnchorElement,\n  IProceedLinkComponentProps\n>(\n  (\n    {\n      disabled = false,\n      children,\n      loading = false,\n      className,\n      withArrow = true,\n      loadingText,\n      href,\n      ...rest\n    },\n    ref\n  ) => {\n    const stateClassName = proceedAppearance({ disabled, loading });\n    return (\n      <a\n        ref={ref}\n        className={classNames(\"ProceedButton\", stateClassName, className)}\n        href={disabled ? undefined : href}\n        {...rest}\n      >\n        {loading && loadingText ? (\n          <>\n            <span></span>\n            <span>{loadingText}</span>\n            <span></span>\n          </>\n        ) : (\n          <>\n            <span></span>\n            <span>{children}</span>\n            <span></span>\n          </>\n        )}\n      </a>\n    );\n  }\n);\n\nexport const ProceedButton = forwardRef<\n  HTMLButtonElement,\n  IProceedButtonComponentProps\n>(\n  (\n    {\n      disabled = false,\n      children,\n      loading = false,\n      className,\n      withArrow = true,\n      loadingText,\n      icon,\n      ...rest\n    },\n    ref\n  ) => {\n    const stateClassName = proceedAppearance({ disabled, loading });\n\n    return (\n      <button\n        ref={ref}\n        className={classNames(\"ProceedButton\", stateClassName, className)}\n        disabled={disabled}\n        {...rest}\n      >\n        {loading && loadingText ? (\n          <>\n            <span></span>\n            <span>{loadingText}</span>\n            <span></span>\n          </>\n        ) : (\n          <>\n            <span></span>\n            <span>{children}</span>\n            <span></span>\n          </>\n        )}\n        {icon && <div className={\"ProceedButton__icon\"}>{icon}</div>}\n      </button>\n    );\n  }\n);\n","import classNames from \"classnames\";\nimport React from \"react\";\n\nimport \"./input.scss\";\n\ninterface IInputComponentProps\n  extends React.LabelHTMLAttributes<HTMLLabelElement> {\n  slotAfterInput?: React.ReactNode;\n  slotAfterLabel?: React.ReactNode;\n  slotRight?: React.ReactNode;\n  label: React.ReactNode;\n  error?: string;\n  size?: \"big\" | \"normal\" | \"small\";\n  textSize?: \"\" | \"small\" | \"normal\" | \"big\";\n}\n\nexport function Input({\n  label,\n  slotAfterInput,\n  slotRight,\n  slotAfterLabel,\n  children,\n  error,\n  size = \"normal\",\n  textSize = \"normal\",\n  className,\n  placeholder,\n  ...rest\n}: IInputComponentProps): JSX.Element {\n  if (slotAfterInput && slotRight) {\n    throw Error(\"Only one of after input slots can be used\");\n  }\n\n  return (\n    <label\n      className={classNames(\"Input\", error ? \"Input--hasError\" : \"\", className)}\n      {...rest}\n    >\n      <div className=\"flex\">\n        <div className=\"flex-grow\">\n          <div className={\"Input__header\"}>\n            <div className={\"Input__label\"}>{label}</div>\n            {slotAfterLabel}\n          </div>\n          <div className={\"Input__wrapper\"}>\n            {typeof children === \"function\"\n              ? children({ inputClass: \"Input__input\" })\n              : children}\n            {slotAfterInput ? (\n              <div className={\"Input__after\"}>{slotAfterInput}</div>\n            ) : null}\n          </div>\n        </div>\n        {slotRight ? (\n          <div className={\"Input__afterCentered\"}>{slotRight}</div>\n        ) : null}\n      </div>\n      {error ? <div className={\"Input__error\"}>{error}</div> : null}\n    </label>\n  );\n}\n","import classNames from \"classnames\";\nimport React, { HTMLAttributes } from \"react\";\n\nimport \"./icon.scss\";\n\nexport type TCreditCardIconName =\n  | \"amex\"\n  | \"card\"\n  | \"mastercard\"\n  | \"unionpay\"\n  | \"visa\";\n\nexport type TCurrencyIconName =\n  | \"currency-btc\"\n  | \"currency-usd\"\n  | \"currency-near\";\n\nexport type TIconName =\n  | \"arrow-up-circle\"\n  | \"info-square\"\n  | \"dropdown-arrow\"\n  | \"arrow-right-square\"\n  | \"near-pay-logo\"\n  | \"spinner\";\n\ninterface ICssTransform {\n  rotate?: string;\n}\n\ninterface IIconComponentProps extends HTMLAttributes<HTMLDivElement> {\n  icon?: TIconName | TCurrencyIconName | TCreditCardIconName;\n  renderIcon?: React.ReactNode;\n  size?: number;\n  transform?: ICssTransform;\n}\n\nfunction buildTransform(transform: ICssTransform): string {\n  if (!transform) return \"\";\n\n  const properties: string[] = [];\n\n  for (const [property, value] of Object.entries(transform)) {\n    properties.push(`${property}(${value})`);\n  }\n\n  return properties.join(\",\");\n}\n\nexport function Icon({\n  icon = \"info-square\",\n  className,\n  transform,\n  size,\n  children,\n  ...rest\n}: IIconComponentProps): JSX.Element {\n  // const IconComponent = icons[icon];\n\n  const transformProp = buildTransform(transform || {});\n\n  return (\n    <i\n      className={classNames(\"pay-with-near-icon\", className)}\n      style={{ transform: transformProp, width: size, height: size }}\n      {...rest}\n    >\n      {children}\n      {/* {children ||\n        (IconComponent && (\n          <Suspense fallback={<span></span>}>\n            <IconComponent />\n          </Suspense>\n        ))} */}\n    </i>\n  );\n}\n","import classNames from \"classnames\";\nimport { ICurrency } from \"lib/api/currencies\";\nimport { HTMLAttributes } from \"react\";\nimport { NpDropdownArrowIcon } from \"ui\";\nimport { Icon } from \"ui/icon\";\n\nimport \"./currency-select.scss\";\n\ninterface ICurrencySelectComponentProps extends HTMLAttributes<HTMLDivElement> {\n  currency: ICurrency;\n  disabled: boolean;\n}\n\nexport function CurrencySelect({\n  currency,\n  className,\n  disabled,\n  ...rest\n}: ICurrencySelectComponentProps): JSX.Element {\n  return (\n    <div\n      className={classNames(\n        \"CurrencySelect\",\n        disabled ? \"CurrencySelect--disabled\" : \"\",\n        className\n      )}\n      {...rest}\n    >\n      <Icon className={\"CurrencySelect__icon\"}>\n        <img src={currency.logoUrl} alt={currency.viewedTicker} />\n      </Icon>\n      <div className={\"CurrencySelect__text\"}>{currency.viewedTicker}</div>\n      <Icon size={20} className={\"CurrencySelect__arrow\"}>\n        <NpDropdownArrowIcon />\n      </Icon>\n    </div>\n  );\n}\n","import { ICurrency } from 'lib/api/currencies';\nimport React from 'react';\nimport NumberFormat, { NumberFormatValues } from 'react-number-format';\nimport { Input } from 'ui/input';\nimport { CurrencySelect } from './currency-select';\n\ninterface ICurrencyInputComponentProps\n  extends React.HTMLAttributes<HTMLElement> {\n  onValueChange: (values: NumberFormatValues) => void;\n  currency: ICurrency;\n  onCurrencySelectClick: () => void;\n  renderAfter?: React.ReactNode;\n  value?: string;\n  label: React.ReactNode;\n  error?: string;\n  selectDisabled?: boolean;\n  inputDisabled?: boolean;\n  isLoading?: boolean;\n}\n\nexport function CurrencyInput({\n  onInput,\n  value,\n  label,\n  onValueChange,\n  onCurrencySelectClick,\n  error,\n  selectDisabled,\n  inputDisabled,\n  currency,\n  isLoading = false,\n  ...rest\n}: ICurrencyInputComponentProps): JSX.Element {\n  const prefix = currency.symbol;\n  // const suffix = currency.symbol ? '' : '' + currency.ticker.toUpperCase();\n\n  return (\n    <Input\n      label={label}\n      error={error}\n      slotAfterInput={\n        <CurrencySelect\n          currency={currency}\n          onClick={\n            selectDisabled\n              ? () => {}\n              : (e: any) => {\n                  e.preventDefault();\n                  onCurrencySelectClick();\n                }\n          }\n          disabled={!!selectDisabled}\n        ></CurrencySelect>\n      }\n      {...rest}\n    >\n      {isLoading ? (\n        <input disabled readOnly></input>\n      ) : (\n        <NumberFormat\n          thousandSeparator={false}\n          prefix={prefix}\n          onValueChange={onValueChange}\n          allowLeadingZeros={true}\n          decimalScale={currency.roundOff}\n          onInput={onInput}\n          value={value}\n          placeholder=\"0.00\"\n          readOnly={inputDisabled}\n        ></NumberFormat>\n      )}\n    </Input>\n  );\n}\n","import './widget-container.scss';\nimport classNames from 'classnames';\nimport React, { HTMLAttributes } from 'react';\n\nexport function WidgetContainer({\n  className,\n  ...rest\n}: HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div className={classNames('WidgetContainer', className)} {...rest}></div>\n  );\n}\n","import \"./expiry-timer.scss\";\n\nimport { block } from \"bem-cn\";\nimport { useEffect, useState } from \"react\";\nimport dayjs from \"dayjs\";\n\nconst b = block(\"pay-with-near-pay-timer\");\n\ninterface Props {\n  expiryAt: string;\n  onExpired: () => void;\n}\nexport const ExpiryTimer: React.FC<Props> = (props) => {\n  const { expiryAt, onExpired } = props;\n  const [timeLeft, setTimeLeft] = useState(getTimeLeft(expiryAt));\n\n  useEffect(() => {\n    if (getTimeLeft(expiryAt) < 0) {\n      onExpired();\n    }\n\n    const timer = setTimeout(() => {\n      setTimeLeft(getTimeLeft(expiryAt));\n    }, 1000);\n\n    return () => clearTimeout(timer);\n  }, [timeLeft, expiryAt, onExpired]);\n\n  if (getTimeLeft(expiryAt) < 0) {\n    return null;\n  }\n\n  return <div className={b()}>{msecToTimeFormat(timeLeft)}</div>;\n};\n\nconst getTimeLeft = (expiryAt: string): number => {\n  const expiryAtDayjs = dayjs(expiryAt);\n  const curDayjs = dayjs.utc();\n\n  const millisecondLeft = expiryAtDayjs.diff(curDayjs);\n\n  return millisecondLeft;\n};\n\nconst msecToTimeFormat = (ms: number): string => {\n  const minutes = Math.floor(ms / (60 * 1000));\n  const minutesMs = ms % (60 * 1000);\n  const seconds = Math.floor(minutesMs / 1000);\n\n  return `${minutes}:${seconds > 9 ? seconds : `0${seconds}`}`;\n};\n","import \"./pay-widget.scss\";\n\nimport { block } from \"bem-cn\";\nimport { NpLogoIcon } from \"ui\";\nimport { ProceedButton } from \"components/proceed-button\";\nimport { ICurrency } from \"lib/api/currencies\";\nimport { CurrencyInput } from \"components/currency-input\";\nimport classNames from \"classnames\";\nimport { WidgetContainer } from \"ui/widget-container/widget-container\";\nimport { TPayment } from \"lib/api\";\nimport { ExpiryTimer } from \"components/expiry-timer\";\nimport { QRCodeSVG } from \"qrcode.react\";\n\nconst b = block(\"pay-with-near-pay-widget\");\nconst bDescription = block(\"pay-with-near-pay-widget-description\");\n\ninterface Props {\n  payment: TPayment;\n  currency: ICurrency;\n  onPay: () => void;\n  onExpired: () => void;\n}\nexport const PayWidget: React.FC<Props> = (props) => {\n  const { payment, currency, onPay, onExpired } = props;\n\n  return (\n    <WidgetContainer className={b()}>\n      <div className={b(\"title\")}>{payment.name}</div>\n      <div className={b(\"description\")}>{payment.description}</div>\n      <div className={bDescription()}>\n        <div>\n          <div className={bDescription(\"label\")}>Payment: </div>\n          <div>{payment.paymentId}</div>\n        </div>\n        <div>\n          <div className={bDescription(\"label\")}>Recipient: </div>\n          <div>{payment.address}</div>\n        </div>\n      </div>\n      <ExpiryTimer expiryAt={payment.expiryAt} onExpired={onExpired} />\n      <CurrencyInput\n        label={\"Amount to Pay\"}\n        value={payment.displayAmount}\n        currency={currency}\n        onValueChange={() => {}}\n        onCurrencySelectClick={() => {}}\n        selectDisabled={true}\n        className=\"mb-4\"\n      />\n      <ProceedButton onClick={onPay}>Pay with NEAR wallet</ProceedButton>\n\n      <div className={b(\"or\")}>or</div>\n\n      <div className={b(\"qr-code-container\")}>\n        <QRCodeSVG\n          value={`${payment.address}?amount=${payment.displayAmount}`}\n        />\n      </div>\n\n      <div className={b(\"payment-method-text\")}>\n        Scan following&nbsp;QR code with your wallet or&nbsp;enter\n        Account&nbsp;ID&nbsp;and amount manually.\n      </div>\n\n      <a\n        href=\"http://nearpay.co\"\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n        className={classNames(b(\"link-nearpay\"))}\n      >\n        <span className={b(\"link-nearpay_gray\")}>Powered by</span>\n        {\"  \"}\n        <NpLogoIcon className={b(\"link-nearpay_icon\")} width=\"20\" height=\"15\" />\n        {\"  \"}\n        <span>NearPay</span>\n      </a>\n    </WidgetContainer>\n  );\n};\n","import { currenciesApi, TPayment } from \"lib/api\";\nimport { environment } from \"lib/config\";\nimport { nearToYoktoNear, useNear } from \"lib/near\";\nimport { usePayment } from \"models/payment\";\nimport { useMemo } from \"react\";\nimport useSWR from \"swr\";\n\nexport const useModel = () => {\n  const currenciesSwr = useSWR(\"currencies\", currenciesApi.fetchCurrencies);\n  const { payment, isExpired, handleExpired } = usePayment();\n  const near = useNear();\n  const handlerPay = useHandlerPay({ near, payment: payment ?? null });\n\n  const currency = useMemo(\n    () =>\n      currenciesSwr.data?.find((c) => c.ticker === environment.defaultCurrency),\n    [currenciesSwr]\n  );\n\n  const isLoaded =\n    !!currenciesSwr.data && (!!payment || isExpired) && near.isReady;\n\n  return {\n    isExpired,\n    isLoaded,\n    payment: payment,\n    currencies: currenciesSwr.data,\n    currency,\n    handlerPay,\n    handleExpired,\n  };\n};\n\nconst basePath = `${window.location.origin}/payment`;\n\ntype UsePayParams = {\n  near: ReturnType<typeof useNear>;\n  payment: TPayment | null;\n};\nconst useHandlerPay = (params: UsePayParams) => {\n  const { near, payment } = params;\n\n  if (!payment) {\n    return () => {\n      throw new Error(\"Payment is empty\");\n    };\n  }\n\n  if (!near.isAuthorized) {\n    return () =>\n      near.login({\n        successUrl: `${basePath}/${payment.paymentId}/send`,\n        failureUrl: `${basePath}/${payment.paymentId}/failure`,\n      });\n  }\n\n  return () => {\n    const yoktoNearAmount = nearToYoktoNear(+payment.displayAmount);\n\n    if (!yoktoNearAmount || !payment.address) {\n      throw new Error(\"Data is empty\");\n    }\n\n    near.send(\n      yoktoNearAmount,\n      payment.address,\n      `${basePath}/${payment.paymentId}/pending`\n    );\n  };\n};\n","import { Agreement } from \"components/agreement\";\nimport { PayWidget } from \"components/pay-widget\";\nimport { useModel } from \"./model\";\nimport { GeneralLayout, Loader, LoaderContainer } from \"ui\";\nimport { block } from \"bem-cn\";\nimport \"./payment-page.scss\";\nimport { environment } from \"lib/config\";\n\nconst b = block(\"pay-with-near-payment-page\");\n\nexport function PaymentPage() {\n  const { currency, payment, isLoaded, isExpired, handlerPay, handleExpired } =\n    useModel();\n\n  if (!isLoaded) {\n    return (\n      <GeneralLayout>\n        <LoaderContainer>\n          <Loader />\n        </LoaderContainer>\n      </GeneralLayout>\n    );\n  }\n\n  if (isExpired) {\n    return (\n      <GeneralLayout className={b()}>\n        <span className={b(\"message\")}>This payment link is expired</span>\n        <a className={b(\"link\")} href={environment.payWithNearUrl}>\n          Back to shop\n        </a>\n      </GeneralLayout>\n    );\n  }\n\n  if (!payment || !currency) {\n    return null;\n  }\n\n  return (\n    <GeneralLayout>\n      <PayWidget\n        payment={payment}\n        currency={currency}\n        onPay={handlerPay}\n        onExpired={handleExpired}\n      />\n      <Agreement />\n    </GeneralLayout>\n  );\n}\n","import { PaymentPage } from \"./payment-page\";\nexport default PaymentPage;\n"],"names":["b","block","Agreement","props","className","mix","href","target","rel","proceedAppearance","disabled","loading","ProceedButton","forwardRef","ref","children","loadingText","withArrow","icon","rest","stateClassName","classNames","Input","label","slotAfterInput","slotRight","slotAfterLabel","error","size","textSize","placeholder","Error","inputClass","Icon","transform","transformProp","properties","Object","entries","property","value","push","join","buildTransform","style","width","height","CurrencySelect","currency","src","logoUrl","alt","viewedTicker","CurrencyInput","onInput","onValueChange","onCurrencySelectClick","selectDisabled","inputDisabled","isLoading","prefix","symbol","onClick","e","preventDefault","readOnly","thousandSeparator","allowLeadingZeros","decimalScale","roundOff","WidgetContainer","ExpiryTimer","expiryAt","onExpired","useState","getTimeLeft","timeLeft","setTimeLeft","useEffect","timer","setTimeout","clearTimeout","msecToTimeFormat","expiryAtDayjs","dayjs","curDayjs","diff","ms","minutes","Math","floor","minutesMs","seconds","bDescription","PayWidget","payment","onPay","name","description","paymentId","address","displayAmount","basePath","window","location","origin","useHandlerPay","params","near","isAuthorized","yoktoNearAmount","nearToYoktoNear","send","login","successUrl","failureUrl","currenciesSwr","useSWR","currenciesApi","usePayment","isExpired","handleExpired","useNear","handlerPay","useMemo","data","find","c","ticker","environment","isLoaded","isReady","currencies","useModel"],"sourceRoot":""}